<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>XGBoost — التعلّم المعزّز بالتدرّج للأشجار</title>

  <script>
    window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }, svg: { fontCache: 'global' } };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <style>
    :root { --bg:#0f172a; --card:#111827; --muted:#94a3b8; --text:#e5e7eb; --accent:#38bdf8; --chip:#1f2937; --border:#1f2937; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,"Noto Kufi Arabic",sans-serif;line-height:1.8;}
    .container{max-width:920px;margin:24px auto;padding:16px;}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:22px;box-shadow:0 10px 20px rgba(0,0,0,.25);}
    h1,h2{margin:0 0 12px;line-height:1.3;}
    h1{font-size:28px;} h2{font-size:20px;color:var(--accent);}
    p{margin:0 0 10px;} .muted{color:var(--muted);}
    .badge{display:inline-block;background:var(--chip);border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:12px;margin-left:6px;}
    .eq{background:#0b1220;border:1px solid var(--border);border-radius:12px;padding:12px;margin:8px 0;overflow-x:auto;direction:ltr;text-align:center;color:#f8fafc;}
    ul{margin:8px 0 0 0;padding-right:18px;} li{margin:6px 0;}
    .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));margin-top:10px;}
    .box{background:#0b1220;border:1px dashed var(--border);border-radius:14px;padding:14px;}
    .tip{border-right:4px solid var(--accent);background:#07101c;padding:12px;border-radius:12px;margin-top:12px;}
    code,pre{background:#0b1220;color:#f8fafc;border-radius:10px;border:1px solid var(--border);}
    pre{padding:12px;overflow-x:auto;}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>XGBoost <span class="badge">Extreme Gradient Boosting</span></h1>
      <p class="muted">
        خوارزمية تعلّم آلي قوية تعتمد على تجميع أشجار قرار ضعيفة على التوالي (Boosting) لتقليل الخطأ تدريجيًا، مع تنظيم (Regularization) للحد من فرط التعلّم.
      </p>

      <h2>الفكرة</h2>
      <p>
        يتم بناء نموذج على شكل مجموع أشجار قرار متتابعة. كل شجرة جديدة تتعلم من أخطاء النموذج السابق (البواقي).
      </p>

      <h2>الدالة الهدفية (مبسّطة)</h2>
      <div class="eq">
        $$ \mathcal{L} = \sum_{t=1}^{n} \ell\!\left(y_t,\ \hat{y}_t\right) \;+\; \sum_{k=1}^{K} \Omega(f_k), \quad \text{حيث } \hat{y}_t = \sum_{k=1}^{K} f_k(x_t) $$
      </div>
      <p class="muted">
        \(\ell\): دالة الخسارة (مثل MSE)، و\(\Omega\): حدّ التنظيم على تعقيد الشجرة.
      </p>

      <h2>استخدامه في السلاسل الزمنية</h2>
      <ul>
        <li>إنشاء ميزات زمنية يدويًا مثل: <strong>Lag features</strong> (قِيَم الأيام السابقة)، <strong>المتوسطات المتحركة</strong>، <strong>اليوم/الشهر</strong>، إلخ.</li>
        <li>التقسيم يكون زمنيًا (عدم خلط الماضي بالمستقبل) لتجنّب <strong>تسرّب المعلومات</strong>.</li>
      </ul>

      <div class="grid">
        <div class="box">
          <strong>أهم الهايبر باراميترز:</strong>
          <ul>
            <li><code>n_estimators</code>: عدد الأشجار.</li>
            <li><code>learning_rate</code>: سرعة التعلّم (أصغر = دقة أعلى غالبًا + أشجار أكثر).</li>
            <li><code>max_depth</code>, <code>min_child_weight</code>: تتحكم في تعقيد الشجرة.</li>
            <li><code>subsample</code>, <code>colsample_bytree</code>: أخذ عينات لتقليل التباين.</li>
            <li><code>reg_alpha</code>, <code>reg_lambda</code>: تنظيم L1/L2 للحد من فرط التعلّم.</li>
          </ul>
        </div>
        <div class="box">
          <strong>مقاييس التقييم الشائعة:</strong>
          <ul>
            <li>RMSE — الجذر التربيعي لمتوسط مربع الأخطاء.</li>
            <li>MAE — متوسط الخطأ المطلق.</li>
            <li>MAPE — متوسط نسبة الخطأ المئوية (تجنّبه عند وجود قيم فعلية = 0).</li>
            <li>R² — نسبة التباين المفسّر (اختياري).</li>
          </ul>
        </div>
      </div>

      <h2>المميزات</h2>
      <ul>
        <li>دقيق وسريع نسبيًا ومهيّأ للأداء.</li>
        <li>يتعامل جيدًا مع الميزات غير الخطية والتفاعلات بينها.</li>
      </ul>

      <h2>العيوب</h2>
      <ul>
        <li>يحتاج تجهيز ميزات زمنية بعناية (ليس نموذجًا احتماليًا زمنيًا بحتًا).</li>
        <li>عرضة لفرط التعلّم إذا لم يتم تنظيمه وملاءمته بشكل صحيح.</li>
      </ul>

      <div class="tip">
        <strong>نصائح عملية:</strong>
        <ul class="muted">
          <li>استخدم <em>Time Series CV</em> (مثل expanding window) بدل K-Fold العشوائي.</li>
          <li>احرص على عدم تسريب المستقبل: أنشئ الميزات من الماضي فقط.</li>
          <li>جرّب موازنة <code>learning_rate</code> مع <code>n_estimators</code> (قيم صغيرة + أشجار أكثر غالبًا أفضل).</li>
          <li>افحص أهمية الميزات لمعرفة أكثر الـ lags إفادة.</li>
        </ul>
      </div>

      <h2>مثال بسيط (Features من تأخيرات)</h2>
      <pre><code># X = [lag_1, lag_2, ..., lag_p]  →  y = Close
# تنبؤ القيم المستقبلية يتم تدريجيًا باستخدام أحدث lags متاحة.</code></pre>
    </div>
  </div>
</body>
</html>
